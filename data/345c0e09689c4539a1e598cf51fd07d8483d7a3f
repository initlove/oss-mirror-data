{
  "node_id": "MDM6VGFnNDYwODk1NjA6MzQ1YzBlMDk2ODljNDUzOWExZTU5OGNmNTFmZDA3ZDg0ODNkN2EzZg==",
  "sha": "345c0e09689c4539a1e598cf51fd07d8483d7a3f",
  "url": "https://api.github.com/repos/containerd/containerd/git/tags/345c0e09689c4539a1e598cf51fd07d8483d7a3f",
  "tagger": {
    "name": "Derek McGowan",
    "email": "derek@mcgstyle.net",
    "date": "2017-12-01T00:40:47Z"
  },
  "object": {
    "sha": "08f179386e1310e13e437af4724aa1a1ff7e3647",
    "type": "commit",
    "url": "https://api.github.com/repos/containerd/containerd/git/commits/08f179386e1310e13e437af4724aa1a1ff7e3647"
  },
  "tag": "v1.0.0-rc.0",
  "message": "Welcome to the release of containerd v1.0.0-rc.0!\n\n*This is a pre-release of containerd*\n\nThe final 1.0 release stretch has been reached after 7 alphas and 4 betas full\nof stability fixes, hardening, and API improvements. This release candidate\ncontinues that pattern in including stability fixes, usability improvements and\nperformance optimizations.\n\nAs part of the preparation for supporting the release of Containerd 1.0, the\ngovernance model has been updated. The same as in previous versions, the day to\nday management of the project is taken care of by the maintainers. The roles\nof chief maintainer and BDFL have been removed and a technical steering\ncommittee has been added as an escalation point when consensus cannot be reached\namong maintainers. See https://github.com/moby/tsc.\n\nPlease try out the release binaries and report any issues at\nhttps://github.com/containerd/containerd/issues.\n\nShim Memory Improvements\n\nThe shim memory usage has been identified as a key component to optimize. The\nshim gets run for every container making memory usage multiplied by the\nnumber of containers on a machine, requiring lower memory usage in order to\nincrease density.\n\nIn profiling the memory usage of the shim, it was discovered that the HTTP2\nand GRPC stacks were accounting for a majority of the usage. Since the RPC\nrequests to the shim are fairly simple and there is no need for handling many\nclients, a simpler protocol is now used with much less overhead. In order to\navoid changing the client or server code, ttrpc is used to generate code\nsimilar to GRPC using the same protocol definitions, but using the lighter\nweight protocol. This had the effect of drastically reducing the memory\nusage of the shim.\n\nMemory improvements over beta 2...\n```\n  RSS CMD\n 3644 containerd-shim -namespace default -workdir /var/lib/containerd/io.containerd.runtime.v1.linux/default/test10 -address /run/containerd/containerd.sock -containerd-binary /usr/local/bin/containerd -debug\n15320 docker-containerd-shim --namespace moby --workdir /var/lib/docker/containerd/daemon/io.containerd.runtime.v1.linux/moby/ffa219303c1419b179393a1123f176bb4268337432b0ca7945bc7ac66db73cad --address /var/run/docker/containerd/docker-containerd.sock --runtime-root /var/run/docker/\n```\n\nSee [ttrpc repository](https://github.com/stevvooe/ttrpc) for implementation.\n\nGarbage Collector Improvements\n\nGarbage collection is now scheduled by a background process which watches\nchanges and tracks the amount of time garbage collection is taking. It is able\nto use that information to schedule garbage collection based on configuration\noptions. The default configuration option aims to limit the amount of time the\nmetadata store is locked for garbage collection to 20ms of every second.\n\nAdditionally image removal now has an option to synchronously cleanup all\nreferenced resources (such as snapshots). This option immediately schedules a\ngarbage collection and waits for it to complete before returning to the client.\nSince the time to remove a snapshot depends on the size of the snapshot, the\ntime to synchronously remove an image cannot be consistent. For faster and\nmore consistent removals, images should be deleted asynchronously whenever\npossible. Asynchronous remains the default.\n\nContributors\n\n* Akihiro Suda\n* Daniel Nephin\n* Daniel, Dao Quang Minh\n* Darren Stahl\n* Derek McGowan\n* Jess Valarezo\n* Kenfe-MickaÃ«l Laventure\n* Kir Kolyshkin\n* Lantao Liu\n* Michael Crosby\n* Phil Estes\n* Stephen J Day\n* yanxuean\n\nChanges\n\n* 08f179386e Merge pull request #1848 from dmcgowan/update-version-rc.0\n* 30ac46e9cf Update version to v1.0.0-rc.0\n* 4bcd272c14 Merge pull request #1845 from dmcgowan/fix-rc.0-notes\n* 6952a61daa Update previous version to beta not current rc\n* 7e4be4639a Merge pull request #1834 from dmcgowan/v1.0.0-rc.0-notes\n* 07d4154515 Merge pull request #1844 from Random-Liu/close-fifos-on-failure\n* a03fdabc14 Close FIFOs on failure.\n* e64d179163 Add release notes for v1.0.0-rc.0\n* 763d29f4c2 Merge pull request #1842 from dmcgowan/fix-snapshot-close-twice\n* 25b5592eaf Fix close twice test to retain snapshot\n* 2657e49fc1 Merge pull request #1835 from stevvooe/we-use-ttrpc\n* 6c416fa3a7 shim: we use ttrpc in the shim now\n* c357934f0f Merge pull request #1841 from crosbymichael/parse-uid\n* a4a4c90ed3 Use strconv.Atoi for uid/gid parsing\n* 8fbdd5c63d Merge pull request #1840 from kolyshkin/mkdir-all\n* acc6f4ec77 MkdirAll: fix usage\n* 8114d2f2e2 Merge pull request #1838 from estesp/mention-kernel-vers\n* e974099b8c Merge pull request #1839 from crosbymichael/test-long-exec\n* a87062efdd Add runtime requirements section to README\n* 6bff39c643 Merge pull request #1837 from crosbymichael/bump-cgroups\n* 68bec1e9ce Add test for large exec payload\n* c4b11148f9 Merge pull request #1831 from stevvooe/update-ttrpc\n* 4349df4554 Update cgroups to 29da22c6171a4316169f9205ab6c49f5\n* 393cf8e8fc vendor: update ttrpc with latest changes\n* 96ca9738ca Merge pull request #1797 from jessvalarezo/rename-packages\n* 04dab2acd6 Merge pull request #1832 from crosbymichael/stress-kill\n* 1dd6f339a2 rename snapshot->snapshots proto pkg and service\n* 9885edfc44 rename snapshot->snapshots pkg\n* 4363994d87 Fix stress test tool exec kill\n* 61c8fe2307 ctr: snapshot->snapshots cmd, add aliases\n* 59bd196711 Merge pull request #1830 from stevvooe/define-fieldpath-support-envelope\n* 16d3aeb515 Merge pull request #1829 from AkihiroSuda/ctr-envvar-snapshotter\n* d7c950e145 events: define fieldpath implement for envelope\n* a56e7420a7 Merge pull request #1812 from darrenstahlmsft/revendor\n* d298f9a070 Merge pull request #1824 from kolyshkin/static-build\n* 3da99ed7a5 Merge pull request #1825 from mlaventure/use-defaults-pkg-everywhere\n* 7f95b9f987 ctr: add EnvVar `CONTAINERD_SNAPSHOTTER` for `--snapshotter`\n* 0d682e24a1 plugins: don't compile for static build\n* 6bf779c589 Use defaults pkg for all platforms\n* bc9cb25012 Update tar to use PAXRecords instead of Xattrs\n* 16d00870ef Add test for prefix header issue\n* 444e4220c2 Revendor hcsshim and go-tar\n* 90a6b79bfc Merge pull request #1810 from dnephin/add-staticcheck-linter\n* a3955e1d21 Merge pull request #1822 from crosbymichael/subreaper\n* 6e9f24b711 Change default subreaper setting\n* 967caeeacc Merge pull request #1821 from dnephin/remove-use-of-deprecated-grpc-funcs\n* dab3ba2aff Replace calls to deprecated grpc functions\n* 118c0a279e Merge pull request #1820 from crosbymichael/shim-lockup\n* 74b3cb3391 Fix exit event handling in shim\n* 723f37d846 Add exec support to stress test tool\n* a05e5fd77a restore deferred cleanup in rootfs.init\n* ee04cfa3f9 Add staticcheck linter\n* 2556c594ec Merge pull request #1767 from stevvooe/ttrpc-shim\n* 9e04cff8e9 Merge pull request #1814 from stevvooe/panic-client-fix-oci-spec\n* ca39f76f82 Merge pull request #1798 from stevvooe/shim-gomaxprocs\n* d54961ccaa vendor: add ttrpc as vendored dependency\n* 372cdfac3b Merge pull request #1638 from dmcgowan/gc-policy\n* f011bec35e Merge pull request #1800 from yanxuean/image-store-redandunt\n* 0d957b1da5 oci: allocate process if not already set\n* 3b670ebc94 remove redundant check for imagestore create\n* 5764bf1bad cmd/containerd-shim: set GOMAXPROCS to 2\n* abeb262d0d Merge pull request #1796 from dnephin/move-oci-pkg\n* f6e877e8be Proposed fix for image content store\n* a21a19a658 fix windows oci package\n* cdf62f69a1 Fix usage of oci in other packages.\n* 081f8c7ce0 oci package passing tests\n* 70e0c8443f Merge pull request #1809 from Random-Liu/fix-build\n* 33c95bb418 Fix build.\n* a7ade66815 Merge pull request #1799 from yanxuean/provide-withLease\n* 9bf0a15946 Merge pull request #1808 from crosbymichael/stress-race\n* ff6c12b284 Merge pull request #1803 from dnephin/warn-on-mem-not-supported\n* 1cb0e81b5a Fix race in stress test tool\n* 12e7c76771 Merge pull request #1802 from yanxuean/unpack-lease\n* 153fcfaea0 Merge pull request #1806 from dnephin/fix-ctr-events\n* 0103d14b47 Fix ctr events\n* 8fe12adc20 Warn if OOM monitoring is not available\n* 545f247c8e prevent snapshot from gc when unpack image\n* 4af5f65752 Merge pull request #1793 from dmcgowan/gc-add-container-test\n* 908df29ad5 Merge pull request #1792 from dmcgowan/schema1-resumeable\n* d56b49dd7c provide client.WithLease to user\n* e8f52c35ce linux/shim: reduce memory overhead by using ttrpc\n* 8e09b565a7 Merge pull request #1795 from crosbymichael/cgroup-lock\n* e830112efd Add lock around task cgroup\n* 1a6e6a96a4 Merge pull request #1794 from yanxuean/some-typo\n* 81307793b7 some typo\n* 92d40b9a2d Add test for container as gc root\n* bae47820d7 Document defaults\n* b674c64827 Support unknown size from schema 1 manifests\n* 2b1c915f82 Merge pull request #1787 from AkihiroSuda/diff-link\n* 633f4a6b3e Merge pull request #1751 from dnephin/add-unused-linters\n* f74862a0dd Add structcheck, unused, and varcheck linters.\n* 96e2f30250 Merge pull request #1759 from dnephin/single-integration-target\n* a3aeb398fe fs/diff: support symlink to abspath with second-precision mtime\n* 374f04d0e9 Update gc policy configuration to use time duration\n* 3f1a61f76a Add synchronous image delete\n* 72fb8f8f40 Add gc labels to content tests\n* 56b6a5dbd1 Add root labels to snapshot test suite\n* 00596f400e Add gc policy plugin\n* 1bd39d36ed Merge pull request #1788 from crosbymichael/plugin\n* 23dfe54894 Add plugin stability guarantees to release.md\n* 9649a428e8 Merge pull request #1784 from stevvooe/remove-sync-write\n* 95cbe81247 Merge pull request #1783 from crosbymichael/static-shim\n* 5113299cb6 content/local: don't open file with sync\n* 67232e93dc Merge pull request #1779 from AkihiroSuda/resolve-util-bin\n* 434f0e679f Compile shim without cgo for size and mem usage\n* 7ef4aa5c25 shim: support non-default binary name\n* 2fad7822e3 Merge pull request #1782 from dnephin/move-io-pkg\n* 298dabc6c2 Move io.go into cio package\n* bc063f263c Merge pull request #1778 from stevvooe/weak-imports-on-plugins\n* 2edc475818 Merge pull request #1776 from stevvooe/decouple-events-grpc\n* a4968710fd Merge pull request #1777 from jessvalarezo/migrate-client-code\n* 77cb722e1c Merge pull request #1775 from dmcgowan/fix-push-different-tags\n* 50532f231a api: use weak imports for plugin protobufs\n* 9cb91f8bfa Merge pull request #1765 from dmcgowan/rm-lease-resources\n* 2d05c4aa1a events: decouple events package from grpc\n* 8c5dede74e client: move content store client to containerd package\n* aefaeeacb0 client: move diff client to containerd package\n* 8d23e5ef9c client: move image store client to containerd package\n* 6cd9962c7f client: move namespaces client to containerd package\n* 56a35d5cb9 Update docker pusher check tag\n* 5c6e789dde Merge pull request #1769 from stevvooe/split-events-types\n* 5b64f7030d client: move snapshot client to containerd package\n* 09b5ca1072 api/events: split event types from events service\n* fc149f0ef9 Merge pull request #1770 from crosbymichael/resume\n* 4192f99cf0 Only compare times on non-windows\n* 3e5e2ecc0a content/local: consistent handling of data and locks\n* f4fdb940ed vendor: include require package from testify\n* 682151b166 remotes/docker: implement seekable http requests\n* a9308e174d content/local: ensure that resumption is properly supported\n* 368dc17a4c testutil: add Size to DumpDir output\n* 4df7075a74 Remove integration-parallel target\n* 05ec01e827 Fix .gitignore for coverage files\n* 7d64713dce Merge pull request #1768 from stevvooe/consolidate-empty\n* c5022ad92d protobuf: use the gogo/types package for empty\n* cc7e5934c8 Merge pull request #1760 from dnephin/run-unit-tests-on-windows\n* f49b1b7179 Merge pull request #1764 from crosbymichael/exit\n* 96d2c1e0c2 Merge pull request #1766 from dnephin/fix-error-message\n* 2e7f7318cc Normalize 'already exists' errors\n* f3a63f52dc Add support for removing leases on resource removal\n* a72279e53d Skip some tests on windows where the implementation is missing\n* fe5bb4a0fc Update platform tests to use the defaultOS\n* 666d946455 Implement diff.compareSysStat on windows\n* 5025b53704 Re-enable unit tests on appveyor\n* a522a6c7ee Add publish subcommand for publishing events\n* a542cf7dac Merge pull request #1761 from stevvooe/update-protoc\n* 19168f98fe Merge pull request #1754 from AkihiroSuda/fix-snapshot-commit-spec\n* 571c002ef6 Merge pull request #1755 from AkihiroSuda/fix-ctr-snapshot-args\n* 343d2d3c5d Merge pull request #1758 from dnephin/speed-up-unit-test\n* 7354a7f001 README, travis: update protobuf compiler version\n* 5eff92d1ba ctr: fix args\n* 5e8218a63b snapshot: fix specification of Commit\n* d8cf30e42e Reduce number of blobs in TestWalkBlobs\n* c78c156feb Merge pull request #1728 from AkihiroSuda/snapshot-closable\n* d15cee0358 Merge pull request #1737 from estesp/progress-line-fixup\n* f435ec0733 Merge pull request #1757 from dnephin/fix-coverage\n* b28e1eee42 Fix coverage report\n* 37ee054e61 Merge pull request #1739 from crosbymichael/shim-redux\n* 4feb6f228a snapshot: add Close()\n* f9933e9f96 Merge pull request #1742 from jessvalarezo/ctr-task-kill\n* 8376b50b19 Add grpc methods to errdefs\n* c81788b129 Remove errdefs and shimapi types from proc package\n* 9abde39bf7 Fix lint issues on init process\n* 33fe5c1d22 Add debug package for memory reporting\n* 66a70e7fda Refactor runtime initialization\n* 36e5548e76 Remove namepsaces and id imports from shim\n* a7343b0773 Move events from shim into linux runtime\n* 1fe5a251c4 Move Exec creation to init process\n* 6e25898ff0 Move shim process code to package\n* 92ca22c997 Merge pull request #1735 from estesp/image-rm-feedback\n* a74148ba27 Merge pull request #1741 from dnephin/fix-task-path-conflict\n* 1966f9f1b7 ctr: update task kill to take exec-id\n* 680101f919 Merge pull request #1750 from mlaventure/delete-exec-pidfile\n* 231c96098e containerd-shim: Delete exec pidfile on exit\n* c2ab5564b3 Merge pull request #1748 from crosbymichael/bdfl\n* 503b536bf7 Add TSC [Rule]\n* a90669377e Remove chief stuff as well\n* e36c1066fc Remove BDFL sections\n* 732b1560b4 Merge pull request #1745 from AkihiroSuda/remove-lcow-sys-firmware-todo\n* 79e3b978d6 spec_unix.go: remove unneeded TODO (moby/moby#35442)\n* 08760757ed Fix output on ctr images rm to show actual feedback\n* 17093c2f6a Merge pull request #1718 from jessvalarezo/ctr-task-ps\n* 0961807715 rename runcopts to runctypes\n* 807f4d2ec7 expose exec-id on ctr task ps\n* 49af59bfca Validate that root and state paths are different.\n* b4a65de5c6 Merge pull request #1740 from stevvooe/update-grpc\n* 08d1e72cc0 api,linux,windows: update generated protobufs\n* 35697865c0 vendor: update protobuf, grpc and gogo\n* b1527e0a10 Handle progress line length properly for formatting\n\nBreaking Changes\n\n* [#1797](https://github.com/containerd/containerd/pulls/1797) The snapshots GRPC service was renamed from snapshot.\n\n* [#1767](https://github.com/containerd/containerd/pulls/1767) The shim protocol has changed to use ttrpc. The\nnew protocol does not use http2 and is not compatible with previous shim versions using grpc.\n\nDependency Changes\n\nPrevious release can be found at [v1.0.0-beta.3](https://github.com/containerd/containerd/releases/tag/v1.0.0-beta.3)\n\n* 2e2c51242e8993c50445dab7c03c8e7febddd0cf -> go1.10 **github.com/dmcgowan/go-tar**\n* d2e1ade2d719b78fe5b061b4c18a9f7111b5bdc8 -> v0.5 **github.com/gogo/protobuf**\n* 5a0f697c9ed9d68fef0116532c6e05cfeae00e55 -> 1643683e1b54a9e88ad26d98f81400c8c9d9f4f9 **github.com/golang/protobuf**\n* f7dd103d3e4e696aa67152f6b4ddd1779a3455a9 -> 29da22c6171a4316169f9205ab6c49f59b5b852f **github.com/containerd/cgroups**\n* v0.6.3 -> v0.6.7 **github.com/Microsoft/hcsshim**\n* v1.3.0 -> v1.7.2 **google.golang.org/grpc**\n* 8c92e22ce0c492875ccaac3ab06143a77d8ed0c1 **github.com/stevvooe/ttrpc**\n-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEjHoRHCEQV5Sw6KJ79YxdCkQFrNsFAlogpUsACgkQ9YxdCkQF\nrNvbkw/9GDRlwEAA9lq1I1NF2Wv17lOWwCvJMPdxem8wGkNCORuWntH+0v3HTeVg\nT6ohhGSAquqlK5dsUMa1bFPclWuo05P9pq226ghWNeEa9gWwjmy2BnQU+/YUmxhi\n0GEvTvX+0pFXnJQO+PPp/E9ztYgpFXKjACSdlWvsuA1SmCyLHZAqQNqtXKIbRScJ\nJb0MPhrqT0/F+iDbV/Z7ZruEsBIiqTm4IydI9IDdz790nREZdDbyFHIx7RwGmIdM\nzacGB+ouhqKzR5a7fU9m2OUsgpF8AexhK/+NHBz9OIxq8L93Dd8T2TOV+sJvV1eI\nBvdN56MBE9DYV8IqlW/UlQxbpBs0NdDZdsrECG7v6Ruz7aWx3gNpoMMA9plosXtC\nzZS/7l62R734W5y0szr0jcApwI7fniOi3wFMzvXLNwu8hfa1LWsjKhjA7ozl0twU\ngLOVrweGctVT2xT0JYMW7KP91y5NYq3NAKFc6Dzlb7T5jgwfcjO/1Xo7aYE+9IWM\n2rtfb75IwFywl9VX54dTdoLPgTK45Xmrprbsqs3ZZUn9NTDcYZaKe7dR2a6ZbZ4E\nlprcTq6PeclH3/BfAb+eWMRP2CndhJMsacq18HB3pLbZNJsq8MgF4ZdLJKC9zVdO\n9rGf1AG7hTmJSxvRGrJ0ZWw2MzZqH3ehi2qArxACpExO/HZga+E=\n=3vi6\n-----END PGP SIGNATURE-----\n",
  "verification": {
    "verified": true,
    "reason": "valid",
    "signature": "-----BEGIN PGP SIGNATURE-----\n\niQIzBAABCAAdFiEEjHoRHCEQV5Sw6KJ79YxdCkQFrNsFAlogpUsACgkQ9YxdCkQF\nrNvbkw/9GDRlwEAA9lq1I1NF2Wv17lOWwCvJMPdxem8wGkNCORuWntH+0v3HTeVg\nT6ohhGSAquqlK5dsUMa1bFPclWuo05P9pq226ghWNeEa9gWwjmy2BnQU+/YUmxhi\n0GEvTvX+0pFXnJQO+PPp/E9ztYgpFXKjACSdlWvsuA1SmCyLHZAqQNqtXKIbRScJ\nJb0MPhrqT0/F+iDbV/Z7ZruEsBIiqTm4IydI9IDdz790nREZdDbyFHIx7RwGmIdM\nzacGB+ouhqKzR5a7fU9m2OUsgpF8AexhK/+NHBz9OIxq8L93Dd8T2TOV+sJvV1eI\nBvdN56MBE9DYV8IqlW/UlQxbpBs0NdDZdsrECG7v6Ruz7aWx3gNpoMMA9plosXtC\nzZS/7l62R734W5y0szr0jcApwI7fniOi3wFMzvXLNwu8hfa1LWsjKhjA7ozl0twU\ngLOVrweGctVT2xT0JYMW7KP91y5NYq3NAKFc6Dzlb7T5jgwfcjO/1Xo7aYE+9IWM\n2rtfb75IwFywl9VX54dTdoLPgTK45Xmrprbsqs3ZZUn9NTDcYZaKe7dR2a6ZbZ4E\nlprcTq6PeclH3/BfAb+eWMRP2CndhJMsacq18HB3pLbZNJsq8MgF4ZdLJKC9zVdO\n9rGf1AG7hTmJSxvRGrJ0ZWw2MzZqH3ehi2qArxACpExO/HZga+E=\n=3vi6\n-----END PGP SIGNATURE-----\n",
    "payload": "object 08f179386e1310e13e437af4724aa1a1ff7e3647\ntype commit\ntag v1.0.0-rc.0\ntagger Derek McGowan <derek@mcgstyle.net> 1512088847 -0800\n\nWelcome to the release of containerd v1.0.0-rc.0!\n\n*This is a pre-release of containerd*\n\nThe final 1.0 release stretch has been reached after 7 alphas and 4 betas full\nof stability fixes, hardening, and API improvements. This release candidate\ncontinues that pattern in including stability fixes, usability improvements and\nperformance optimizations.\n\nAs part of the preparation for supporting the release of Containerd 1.0, the\ngovernance model has been updated. The same as in previous versions, the day to\nday management of the project is taken care of by the maintainers. The roles\nof chief maintainer and BDFL have been removed and a technical steering\ncommittee has been added as an escalation point when consensus cannot be reached\namong maintainers. See https://github.com/moby/tsc.\n\nPlease try out the release binaries and report any issues at\nhttps://github.com/containerd/containerd/issues.\n\nShim Memory Improvements\n\nThe shim memory usage has been identified as a key component to optimize. The\nshim gets run for every container making memory usage multiplied by the\nnumber of containers on a machine, requiring lower memory usage in order to\nincrease density.\n\nIn profiling the memory usage of the shim, it was discovered that the HTTP2\nand GRPC stacks were accounting for a majority of the usage. Since the RPC\nrequests to the shim are fairly simple and there is no need for handling many\nclients, a simpler protocol is now used with much less overhead. In order to\navoid changing the client or server code, ttrpc is used to generate code\nsimilar to GRPC using the same protocol definitions, but using the lighter\nweight protocol. This had the effect of drastically reducing the memory\nusage of the shim.\n\nMemory improvements over beta 2...\n```\n  RSS CMD\n 3644 containerd-shim -namespace default -workdir /var/lib/containerd/io.containerd.runtime.v1.linux/default/test10 -address /run/containerd/containerd.sock -containerd-binary /usr/local/bin/containerd -debug\n15320 docker-containerd-shim --namespace moby --workdir /var/lib/docker/containerd/daemon/io.containerd.runtime.v1.linux/moby/ffa219303c1419b179393a1123f176bb4268337432b0ca7945bc7ac66db73cad --address /var/run/docker/containerd/docker-containerd.sock --runtime-root /var/run/docker/\n```\n\nSee [ttrpc repository](https://github.com/stevvooe/ttrpc) for implementation.\n\nGarbage Collector Improvements\n\nGarbage collection is now scheduled by a background process which watches\nchanges and tracks the amount of time garbage collection is taking. It is able\nto use that information to schedule garbage collection based on configuration\noptions. The default configuration option aims to limit the amount of time the\nmetadata store is locked for garbage collection to 20ms of every second.\n\nAdditionally image removal now has an option to synchronously cleanup all\nreferenced resources (such as snapshots). This option immediately schedules a\ngarbage collection and waits for it to complete before returning to the client.\nSince the time to remove a snapshot depends on the size of the snapshot, the\ntime to synchronously remove an image cannot be consistent. For faster and\nmore consistent removals, images should be deleted asynchronously whenever\npossible. Asynchronous remains the default.\n\nContributors\n\n* Akihiro Suda\n* Daniel Nephin\n* Daniel, Dao Quang Minh\n* Darren Stahl\n* Derek McGowan\n* Jess Valarezo\n* Kenfe-MickaÃ«l Laventure\n* Kir Kolyshkin\n* Lantao Liu\n* Michael Crosby\n* Phil Estes\n* Stephen J Day\n* yanxuean\n\nChanges\n\n* 08f179386e Merge pull request #1848 from dmcgowan/update-version-rc.0\n* 30ac46e9cf Update version to v1.0.0-rc.0\n* 4bcd272c14 Merge pull request #1845 from dmcgowan/fix-rc.0-notes\n* 6952a61daa Update previous version to beta not current rc\n* 7e4be4639a Merge pull request #1834 from dmcgowan/v1.0.0-rc.0-notes\n* 07d4154515 Merge pull request #1844 from Random-Liu/close-fifos-on-failure\n* a03fdabc14 Close FIFOs on failure.\n* e64d179163 Add release notes for v1.0.0-rc.0\n* 763d29f4c2 Merge pull request #1842 from dmcgowan/fix-snapshot-close-twice\n* 25b5592eaf Fix close twice test to retain snapshot\n* 2657e49fc1 Merge pull request #1835 from stevvooe/we-use-ttrpc\n* 6c416fa3a7 shim: we use ttrpc in the shim now\n* c357934f0f Merge pull request #1841 from crosbymichael/parse-uid\n* a4a4c90ed3 Use strconv.Atoi for uid/gid parsing\n* 8fbdd5c63d Merge pull request #1840 from kolyshkin/mkdir-all\n* acc6f4ec77 MkdirAll: fix usage\n* 8114d2f2e2 Merge pull request #1838 from estesp/mention-kernel-vers\n* e974099b8c Merge pull request #1839 from crosbymichael/test-long-exec\n* a87062efdd Add runtime requirements section to README\n* 6bff39c643 Merge pull request #1837 from crosbymichael/bump-cgroups\n* 68bec1e9ce Add test for large exec payload\n* c4b11148f9 Merge pull request #1831 from stevvooe/update-ttrpc\n* 4349df4554 Update cgroups to 29da22c6171a4316169f9205ab6c49f5\n* 393cf8e8fc vendor: update ttrpc with latest changes\n* 96ca9738ca Merge pull request #1797 from jessvalarezo/rename-packages\n* 04dab2acd6 Merge pull request #1832 from crosbymichael/stress-kill\n* 1dd6f339a2 rename snapshot->snapshots proto pkg and service\n* 9885edfc44 rename snapshot->snapshots pkg\n* 4363994d87 Fix stress test tool exec kill\n* 61c8fe2307 ctr: snapshot->snapshots cmd, add aliases\n* 59bd196711 Merge pull request #1830 from stevvooe/define-fieldpath-support-envelope\n* 16d3aeb515 Merge pull request #1829 from AkihiroSuda/ctr-envvar-snapshotter\n* d7c950e145 events: define fieldpath implement for envelope\n* a56e7420a7 Merge pull request #1812 from darrenstahlmsft/revendor\n* d298f9a070 Merge pull request #1824 from kolyshkin/static-build\n* 3da99ed7a5 Merge pull request #1825 from mlaventure/use-defaults-pkg-everywhere\n* 7f95b9f987 ctr: add EnvVar `CONTAINERD_SNAPSHOTTER` for `--snapshotter`\n* 0d682e24a1 plugins: don't compile for static build\n* 6bf779c589 Use defaults pkg for all platforms\n* bc9cb25012 Update tar to use PAXRecords instead of Xattrs\n* 16d00870ef Add test for prefix header issue\n* 444e4220c2 Revendor hcsshim and go-tar\n* 90a6b79bfc Merge pull request #1810 from dnephin/add-staticcheck-linter\n* a3955e1d21 Merge pull request #1822 from crosbymichael/subreaper\n* 6e9f24b711 Change default subreaper setting\n* 967caeeacc Merge pull request #1821 from dnephin/remove-use-of-deprecated-grpc-funcs\n* dab3ba2aff Replace calls to deprecated grpc functions\n* 118c0a279e Merge pull request #1820 from crosbymichael/shim-lockup\n* 74b3cb3391 Fix exit event handling in shim\n* 723f37d846 Add exec support to stress test tool\n* a05e5fd77a restore deferred cleanup in rootfs.init\n* ee04cfa3f9 Add staticcheck linter\n* 2556c594ec Merge pull request #1767 from stevvooe/ttrpc-shim\n* 9e04cff8e9 Merge pull request #1814 from stevvooe/panic-client-fix-oci-spec\n* ca39f76f82 Merge pull request #1798 from stevvooe/shim-gomaxprocs\n* d54961ccaa vendor: add ttrpc as vendored dependency\n* 372cdfac3b Merge pull request #1638 from dmcgowan/gc-policy\n* f011bec35e Merge pull request #1800 from yanxuean/image-store-redandunt\n* 0d957b1da5 oci: allocate process if not already set\n* 3b670ebc94 remove redundant check for imagestore create\n* 5764bf1bad cmd/containerd-shim: set GOMAXPROCS to 2\n* abeb262d0d Merge pull request #1796 from dnephin/move-oci-pkg\n* f6e877e8be Proposed fix for image content store\n* a21a19a658 fix windows oci package\n* cdf62f69a1 Fix usage of oci in other packages.\n* 081f8c7ce0 oci package passing tests\n* 70e0c8443f Merge pull request #1809 from Random-Liu/fix-build\n* 33c95bb418 Fix build.\n* a7ade66815 Merge pull request #1799 from yanxuean/provide-withLease\n* 9bf0a15946 Merge pull request #1808 from crosbymichael/stress-race\n* ff6c12b284 Merge pull request #1803 from dnephin/warn-on-mem-not-supported\n* 1cb0e81b5a Fix race in stress test tool\n* 12e7c76771 Merge pull request #1802 from yanxuean/unpack-lease\n* 153fcfaea0 Merge pull request #1806 from dnephin/fix-ctr-events\n* 0103d14b47 Fix ctr events\n* 8fe12adc20 Warn if OOM monitoring is not available\n* 545f247c8e prevent snapshot from gc when unpack image\n* 4af5f65752 Merge pull request #1793 from dmcgowan/gc-add-container-test\n* 908df29ad5 Merge pull request #1792 from dmcgowan/schema1-resumeable\n* d56b49dd7c provide client.WithLease to user\n* e8f52c35ce linux/shim: reduce memory overhead by using ttrpc\n* 8e09b565a7 Merge pull request #1795 from crosbymichael/cgroup-lock\n* e830112efd Add lock around task cgroup\n* 1a6e6a96a4 Merge pull request #1794 from yanxuean/some-typo\n* 81307793b7 some typo\n* 92d40b9a2d Add test for container as gc root\n* bae47820d7 Document defaults\n* b674c64827 Support unknown size from schema 1 manifests\n* 2b1c915f82 Merge pull request #1787 from AkihiroSuda/diff-link\n* 633f4a6b3e Merge pull request #1751 from dnephin/add-unused-linters\n* f74862a0dd Add structcheck, unused, and varcheck linters.\n* 96e2f30250 Merge pull request #1759 from dnephin/single-integration-target\n* a3aeb398fe fs/diff: support symlink to abspath with second-precision mtime\n* 374f04d0e9 Update gc policy configuration to use time duration\n* 3f1a61f76a Add synchronous image delete\n* 72fb8f8f40 Add gc labels to content tests\n* 56b6a5dbd1 Add root labels to snapshot test suite\n* 00596f400e Add gc policy plugin\n* 1bd39d36ed Merge pull request #1788 from crosbymichael/plugin\n* 23dfe54894 Add plugin stability guarantees to release.md\n* 9649a428e8 Merge pull request #1784 from stevvooe/remove-sync-write\n* 95cbe81247 Merge pull request #1783 from crosbymichael/static-shim\n* 5113299cb6 content/local: don't open file with sync\n* 67232e93dc Merge pull request #1779 from AkihiroSuda/resolve-util-bin\n* 434f0e679f Compile shim without cgo for size and mem usage\n* 7ef4aa5c25 shim: support non-default binary name\n* 2fad7822e3 Merge pull request #1782 from dnephin/move-io-pkg\n* 298dabc6c2 Move io.go into cio package\n* bc063f263c Merge pull request #1778 from stevvooe/weak-imports-on-plugins\n* 2edc475818 Merge pull request #1776 from stevvooe/decouple-events-grpc\n* a4968710fd Merge pull request #1777 from jessvalarezo/migrate-client-code\n* 77cb722e1c Merge pull request #1775 from dmcgowan/fix-push-different-tags\n* 50532f231a api: use weak imports for plugin protobufs\n* 9cb91f8bfa Merge pull request #1765 from dmcgowan/rm-lease-resources\n* 2d05c4aa1a events: decouple events package from grpc\n* 8c5dede74e client: move content store client to containerd package\n* aefaeeacb0 client: move diff client to containerd package\n* 8d23e5ef9c client: move image store client to containerd package\n* 6cd9962c7f client: move namespaces client to containerd package\n* 56a35d5cb9 Update docker pusher check tag\n* 5c6e789dde Merge pull request #1769 from stevvooe/split-events-types\n* 5b64f7030d client: move snapshot client to containerd package\n* 09b5ca1072 api/events: split event types from events service\n* fc149f0ef9 Merge pull request #1770 from crosbymichael/resume\n* 4192f99cf0 Only compare times on non-windows\n* 3e5e2ecc0a content/local: consistent handling of data and locks\n* f4fdb940ed vendor: include require package from testify\n* 682151b166 remotes/docker: implement seekable http requests\n* a9308e174d content/local: ensure that resumption is properly supported\n* 368dc17a4c testutil: add Size to DumpDir output\n* 4df7075a74 Remove integration-parallel target\n* 05ec01e827 Fix .gitignore for coverage files\n* 7d64713dce Merge pull request #1768 from stevvooe/consolidate-empty\n* c5022ad92d protobuf: use the gogo/types package for empty\n* cc7e5934c8 Merge pull request #1760 from dnephin/run-unit-tests-on-windows\n* f49b1b7179 Merge pull request #1764 from crosbymichael/exit\n* 96d2c1e0c2 Merge pull request #1766 from dnephin/fix-error-message\n* 2e7f7318cc Normalize 'already exists' errors\n* f3a63f52dc Add support for removing leases on resource removal\n* a72279e53d Skip some tests on windows where the implementation is missing\n* fe5bb4a0fc Update platform tests to use the defaultOS\n* 666d946455 Implement diff.compareSysStat on windows\n* 5025b53704 Re-enable unit tests on appveyor\n* a522a6c7ee Add publish subcommand for publishing events\n* a542cf7dac Merge pull request #1761 from stevvooe/update-protoc\n* 19168f98fe Merge pull request #1754 from AkihiroSuda/fix-snapshot-commit-spec\n* 571c002ef6 Merge pull request #1755 from AkihiroSuda/fix-ctr-snapshot-args\n* 343d2d3c5d Merge pull request #1758 from dnephin/speed-up-unit-test\n* 7354a7f001 README, travis: update protobuf compiler version\n* 5eff92d1ba ctr: fix args\n* 5e8218a63b snapshot: fix specification of Commit\n* d8cf30e42e Reduce number of blobs in TestWalkBlobs\n* c78c156feb Merge pull request #1728 from AkihiroSuda/snapshot-closable\n* d15cee0358 Merge pull request #1737 from estesp/progress-line-fixup\n* f435ec0733 Merge pull request #1757 from dnephin/fix-coverage\n* b28e1eee42 Fix coverage report\n* 37ee054e61 Merge pull request #1739 from crosbymichael/shim-redux\n* 4feb6f228a snapshot: add Close()\n* f9933e9f96 Merge pull request #1742 from jessvalarezo/ctr-task-kill\n* 8376b50b19 Add grpc methods to errdefs\n* c81788b129 Remove errdefs and shimapi types from proc package\n* 9abde39bf7 Fix lint issues on init process\n* 33fe5c1d22 Add debug package for memory reporting\n* 66a70e7fda Refactor runtime initialization\n* 36e5548e76 Remove namepsaces and id imports from shim\n* a7343b0773 Move events from shim into linux runtime\n* 1fe5a251c4 Move Exec creation to init process\n* 6e25898ff0 Move shim process code to package\n* 92ca22c997 Merge pull request #1735 from estesp/image-rm-feedback\n* a74148ba27 Merge pull request #1741 from dnephin/fix-task-path-conflict\n* 1966f9f1b7 ctr: update task kill to take exec-id\n* 680101f919 Merge pull request #1750 from mlaventure/delete-exec-pidfile\n* 231c96098e containerd-shim: Delete exec pidfile on exit\n* c2ab5564b3 Merge pull request #1748 from crosbymichael/bdfl\n* 503b536bf7 Add TSC [Rule]\n* a90669377e Remove chief stuff as well\n* e36c1066fc Remove BDFL sections\n* 732b1560b4 Merge pull request #1745 from AkihiroSuda/remove-lcow-sys-firmware-todo\n* 79e3b978d6 spec_unix.go: remove unneeded TODO (moby/moby#35442)\n* 08760757ed Fix output on ctr images rm to show actual feedback\n* 17093c2f6a Merge pull request #1718 from jessvalarezo/ctr-task-ps\n* 0961807715 rename runcopts to runctypes\n* 807f4d2ec7 expose exec-id on ctr task ps\n* 49af59bfca Validate that root and state paths are different.\n* b4a65de5c6 Merge pull request #1740 from stevvooe/update-grpc\n* 08d1e72cc0 api,linux,windows: update generated protobufs\n* 35697865c0 vendor: update protobuf, grpc and gogo\n* b1527e0a10 Handle progress line length properly for formatting\n\nBreaking Changes\n\n* [#1797](https://github.com/containerd/containerd/pulls/1797) The snapshots GRPC service was renamed from snapshot.\n\n* [#1767](https://github.com/containerd/containerd/pulls/1767) The shim protocol has changed to use ttrpc. The\nnew protocol does not use http2 and is not compatible with previous shim versions using grpc.\n\nDependency Changes\n\nPrevious release can be found at [v1.0.0-beta.3](https://github.com/containerd/containerd/releases/tag/v1.0.0-beta.3)\n\n* 2e2c51242e8993c50445dab7c03c8e7febddd0cf -> go1.10 **github.com/dmcgowan/go-tar**\n* d2e1ade2d719b78fe5b061b4c18a9f7111b5bdc8 -> v0.5 **github.com/gogo/protobuf**\n* 5a0f697c9ed9d68fef0116532c6e05cfeae00e55 -> 1643683e1b54a9e88ad26d98f81400c8c9d9f4f9 **github.com/golang/protobuf**\n* f7dd103d3e4e696aa67152f6b4ddd1779a3455a9 -> 29da22c6171a4316169f9205ab6c49f59b5b852f **github.com/containerd/cgroups**\n* v0.6.3 -> v0.6.7 **github.com/Microsoft/hcsshim**\n* v1.3.0 -> v1.7.2 **google.golang.org/grpc**\n* 8c92e22ce0c492875ccaac3ab06143a77d8ed0c1 **github.com/stevvooe/ttrpc**\n"
  }
}
