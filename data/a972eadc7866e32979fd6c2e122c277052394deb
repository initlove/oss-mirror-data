{
  "node_id": "MDM6VGFnMjEyNDI4MzE6YTk3MmVhZGM3ODY2ZTMyOTc5ZmQ2YzJlMTIyYzI3NzA1MjM5NGRlYg==",
  "sha": "a972eadc7866e32979fd6c2e122c277052394deb",
  "url": "https://api.github.com/repos/projectcalico/felix/git/tags/a972eadc7866e32979fd6c2e122c277052394deb",
  "tagger": {
    "name": "Tom Denham",
    "email": "tom@tomdee.co.uk",
    "date": "2017-01-31T22:32:46Z"
  },
  "object": {
    "sha": "08c3f3eeb619125c9b17479e0b45cb4303823fc1",
    "type": "commit",
    "url": "https://api.github.com/repos/projectcalico/felix/git/commits/08c3f3eeb619125c9b17479e0b45cb4303823fc1"
  },
  "tag": "2.1.0-rc1",
  "message": "Felix version 2.1.0-rc1\n\n- Rework EventBuffer as EventSequencer.\n- Change ActiveRulesCalculator to generate dummy drop rules.\n- WiP on iptables writer.\n- Improve logutils: avoid name clash with user-supplied fields.\n- Implement iptables hash resync.  Fix up programming.\n- Rework Felix's main() to pull out external dataplane driver.  Start of internal driver.\n- Add IP set CRUD logic.\n- Minor cleanups.\n- Get IP sets programming in internal DP driver.\n- Refactor to create a Rule and Chain class.\n- Skeleton for policy programming.  Still needs rule rendering!\n- Minor clean-ups.\n- Skeleton for rule rendering logic and other minor tweaks.\n- Implement basic dispatch chain logic.  Add endpointManager.\n- Validate that workload endpoints have names; required by felix.\n- Add drop action to dispatch chains.\n- Add support for hooking kernel chains, use to hook FORWARD chain.\n- Add backoff/panic on iptables failure.\n- Factor out manager objects.\n- Start of profile support.\n- Add dedicated MatchCriteria type for building rules.\n- Add profiles to endpoint chains.\n- Fix failure to delete iptables chains.\n- Switch to RenderInsert() for calculating insert rules.\n- Fix up hash extraction and add UTs.\n- Do deletes right at the end, after cleaning up insertions.\n- WiP on routing table syncer.\n- Add routing table syncer.  Currently poll-based.\n- Skip interfaces that are marked as down when updating routes.\n- Program workload endpoint routes.\n- Minor fixes: - Fix that iptables.Table never set the in-sync flag. - Retry after failing to program routes. (Still need to start monitoring for changes.)\n- Do per-interface proc-sys config.\n- Implement mainline match criteria and fix V6 IP set rendering.\n- Default to using internal dataplane driver.\n- Fix up iptables UT.\n- Add dummy endpoint status reports; should get OpenStack running.\n- Fix name of outbound profile chain.\n- WiP on ipsets cleanup.\n- WiP on route programming retry/monitoring.\n- Implement process status reporting.\n- Add static NAT chains.  Add OpenStack Metadata IP special-case.\n- Add support for setting destination MAC address when programming routes.\n- Add an opaque ID/hash to each rule.\n- Fix that dispatch chains were being calculated from stale data.\n- Fixes to routing table:\n- Add a make patch-script target.\n- Fix copy/paste error in dispatch chain rendering.\n- Add special-case regex used to find old felix rule insertions.\n- Clean ups:\n- Add IPAM pool masquerade support.\n- Self review/go fmt markups.\n- Fix UTs.\n- WiP on IPIP mode.\n- Make WorkloadEndpointChainName usable for host endpoints also\n- Use clearer 'ifaceName' for EndpointChainName arg\n- WiP on IPIP manager\n- Remove label from IP address.\n- Improve comments/logs in IPIP code.\n- Improve handling of ICMPv6: guess the IP version from the protocol version.\n- Add negated match criteria, UTs and fixes.\n- Improve internal dataplane comments.\n- Improve external dataplane commenting.\n- Add log action, log prefix support and DropActionOverride support.\n- Support >15 ports in a match.\n- Tweak cleanup script to remove cali chains.\n- Populate felix-INPUT chain, refine naming, split out wl-to-host chain.\n- Fix UT broken by removal of field.\n- Implement filter output chain, ready for host endpoints to be added.\n- Fix that RouteTable was syncing routes for non-calico interfaces.\n- Add missing return statement.\n- IP sets self-review markups.\n- Shim IP set commands for UT.\n- UTs for ExistenceCache.\n- Organise ipsets classes into files.  Move tests to ipsets_test package.\n- Implement HostDispatchChains\n- Start a test suite for the internal dataplane driver\n- Enhance ifacemonitor to provide address updates as well\n- Checkpoint - ** Coding tasks [4/8]\n- Implement HostEndpointToIptablesChains\n- Link from static input/output chains to host endpoint chains\n- UT fix\n- Implement host endpoint failsafe chains\n- Fixes from running calico-felix by hand\n- Finishing adding host endpoint failsafes\n- Link in cali-INPUT and cali-OUTPUT\n- Add UTs for IPSet object.\n- More UTs for IP sets, cover failure cases.\n- Revert incorrect empty map initializers\n- Code review markups\n- Add mainling UTs for IP set Registry.\n- Add non-coverage UT target (which is lots faster).\n- Making things work - but not sure I need all of these\n- Code review markups\n- Remove conntrack flows when an endpoint is removed.\n- RouteTable and conntrack fixes:\n- Remove optimization from RouteTable that is now incorrect.\n- Code review markups\n- Better error reporting on route sync.\n- Change ifaceAddrs to be a Set\n- Delay status reports: work around OpenStack FV issue.\n- Implement endpoint status reporting.\n- Improve comments and UTs in iptables package.\n- Use host endpoint ID as map key, instead of pointer to ID\n- Code review markups\n- self-review markups\n- Notify iface addrs regardless of iface oper state\n- UT fix\n- Start a UT suite for the 'set' package\n- Improve logging.\n- Work-in-progress on adding iptables UTs.\n- Coverage tests for iptables Table object and minor improvements:\n- Implement periodic iptables refresh.\n- Fix comment.\n- Refresh IPIP tunnel device config on a timer.\n- Mop up some TODOs:\n- Fix lack of log hook in intdataplane test suite.\n- Implement configuration of mark bits, fix mark rendering and add UTs.\n- Fix log leakage during test run.\n- Downgrade spammy route programming failure log to Warning.\n- Fix out-of-date comment.\n- Improve logging when config parsing fails.\n- Shim netlink in routetable package.\n- Mainline tests for RouteTable along with removal of sync conditions.\n- Recheck interface existence to avoid logging errors during tear down.\n- Expand error filtering to more cases to avoid spammy logs on failures.\n- Add more UT for set package.\n- Minor cleanups to routetable.  Remove unused function.\n- Fix that dispatchChains didn't indirect through DropRules().\n- Create structure for ifacemonitor UT\n- Progress on ifacemonitor UT\n- ifacemonitor UT - full coverage except error conditions\n- Call callbacks when link removal is spotted by resync\n- Fix accidental channel write blocking\n- Add comments to explain ifacemonitor testing\n- Address callback now expected when link is down\n- Don't notify addresses after link record deleted\n- Only call address callback when iface addrs are changing\n- Make callback detection channels non-global\n- Remove sleep, make test resilient to slow running\n- Other code review markups\n- Support running Felix on a NAT gateway or router\n- Code review markups.\n- Add UT for conntrack package.\n- Fix occasional test hang: need correct ifIndex on link deletion\n- Add UT for static chains.\n- Cover StaticNATTableChains.\n- Cover rule rendering corner cases.\n- Add UT for per-endpoint chain rendering.\n- Add UT for NAT outgoing rules.\n- Fix test hang: allow for occasional extra addr callback\n- Retry iptables-save to improve robustness and avoid log spam.\n- Code review markups\n- Adjust jittered ticker tests to avoid comparing real sleeps.\n- Fix tracking of best host endpoint match for a host interface\n- Add extra logging around IPIP startup.\n- Fix flap of IPIP tunnel address at start up.\n- Avoid setting link MTU or flags if they're already correct.\n- Write deltas to IP sets where possible.\n- Endpoint manager UT\n- Complete coverage of resolveHostEndpoints\n- Rework host endpoint tests into better ginkgo style\n- Fix: host i/fs map to programmed chains, not host endpoints\n- Fix append bug\n- Add tests with two resolved host interfaces\n- Order rules by i/f name in both host and wl dispatch chains\n- Test which gets used when multiple host eps match an interface\n- Improve representation of host endpoint configuration\n- Code review markups.\n- Shim dataplane in IPIP manager.\n- Add UT for IPIP manager dataplane programming.\n- Add error-case coverage for IPIP manager.\n- Rework ipipManager to deal with transient duplicate IPs.  Add UTs.\n- Honour max IP set size.\n- Add set.FromArray() and Set.AddAll() functions.\n- Add UT for ipsets manager.\n- Add set.From() and use to streamline UTs.\n- Add UT for masquerade manager.\n- UT masquerade manager dirtiness tracking.\n- Add UTs for policy manager.\n- Code review markups.\n- Add UT for status combiner.\n- Really test IPv4 and IPv6 versions of EndpointManager\n- Add go-ut-watch make target.\n- Workload endpoints UT\n- Fix: remove old chains when endpoint's iface changes\n- Introduce TableOptions parameter on NewTable.\n- Rename 'procSysWriter' field to 'writeProcSys'\n- Port ChainInsertMode to golang.\n- Port LogPrefix parameter to Go.\n- Implement tree-based dispatch chains.\n- Code review markups.\n- Code review markups.\n- Floating IPs in golang dataplane driver\n- Code fixes and missing manager reg\n- Adapt existing UTs\n- Code review markups\n- UT and fixes\n- Markups from FV testing:\n- Add host endpoint status reports.\n- Only recalculate the dispatch chains if the data they depend on has changed.\n- Improve commenting/naming.\n- Fix failure to make host endpoint status dirty and add UT.\n- Code review markups.\n- Add marker fields so that action types get traced out in UT output.\n- Include all release notes since last packaging\n- Allow overriding the Git-determined version\n- Felix 2.0.2 Deb/RPM packaging\n- Add support for untracked policies on host endpoints.\n- Rename test file for event sequencer.\n- UTs for untracked policy.\n- Add marker fields so that action types get traced out in UT output.\n- UT and fixes for raw host endpoint chain generation.\n- UT for policy manager.\n- UT for deletion of non-existing chain.\n- Demote overly prominent ifacemonitor warning log\n- Fix that iptables RPF check was being applied for IPv4.\n- Add UT for raw chains.\n- Endpoint manager UT and fixes for notrack.\n- Add additional diags to iptables.Table when it's about to panic.\n- Quick fix for policy/endpoint sequencing issue.  Program all policies to both raw and filter.\n- Code review markups.\n- Remove Python code and update Makefile.\n- Move go code up to main directory.\n- Fix up Golang imports after moving go files.\n- Update Makefile for new location of go files.\n- Guard against running builds from non-git dir.\n- Move go/docs folder into root.\n- Remove gen-version.sh.\n- Remove unneeded line.\n- Tidy up .gitignore.\n- Make iptables mark allocation stateful.\n- Add more UT.\n- Improve dataplane driver API doc.\n- Cleanup README, CONTRIBUTING and unused file.\n- Fix that an empty string for FailsafeIn/OutboundHostPorts was rejected.\n- Fix ifacemonitor UT concurrent map access\n- Check for expected NAT OUTPUT chain\n- Add NAT table insertion for OUTPUT chain\n- Pin libcalico-go to v1.0.2\n- Code review markups\n- Switch to calico/go-build container\n- Pin calico/build to version with Felix's deps.\n- Code review markups.\n- Add datamodel overview to API doc.\n- Remove accidental inclusion of licensecheck code from other branch.\n- Code review markups.\n- Fix heading.\n",
  "verification": {
    "verified": false,
    "reason": "unsigned",
    "signature": null,
    "payload": null
  }
}
